{"version":3,"file":"octo-multipass-loader.js","sources":["../../src/lib/web-components/octo-multipass-loader/OctoMultipassLoader.svelte"],"sourcesContent":["<svelte:options customElement=\"octo-multipass-loader\" />\n\n<script>\n  import { onMount } from 'svelte';\n  import { createOctoQuery } from '../shared/octo-store.js';\n  import { parseMultipass, multipassToParams, extractWhatBy } from '../shared/multipass-utils.js';\n  \n  // Props\n  export let render = 'list';  // list, cards, compact\n  export let placeholder = 'Drop MultiPass JSON or GIF here';\n  \n  // State\n  let parsedMultiPass = null;\n  let queryParams = null;\n  let what = 'pages';\n  let by = 'thorped';\n  let query = null;\n  let isDragging = false;\n  let error = null;\n  let gifPreview = null;\n  \n  // Reactive: create query when multipass is loaded\n  $: {\n    if (parsedMultiPass) {\n      ({ what, by } = extractWhatBy(parsedMultiPass));\n      queryParams = multipassToParams(parsedMultiPass);\n      query = createOctoQuery(what, by);\n      \n      // Auto-load after parsing\n      if (query && queryParams) {\n        setTimeout(() => load(), 50);\n      }\n    }\n  }\n  \n  // Load function\n  async function load() {\n    if (!query || !queryParams) return;\n    await query.fetch(queryParams);\n  }\n  \n  // File handling\n  function handleDragOver(e) {\n    e.preventDefault();\n    isDragging = true;\n  }\n  \n  function handleDragLeave(e) {\n    e.preventDefault();\n    isDragging = false;\n  }\n  \n  function handleDrop(e) {\n    e.preventDefault();\n    isDragging = false;\n    \n    const file = e.dataTransfer?.files?.[0];\n    if (file) {\n      handleFile(file);\n    }\n  }\n  \n  function handleFileInput(e) {\n    const file = e.target?.files?.[0];\n    if (file) {\n      handleFile(file);\n    }\n    // Reset file input\n    if (e.target) e.target.value = '';\n  }\n  \n  async function handleFile(file) {\n    error = null;\n    gifPreview = null;\n    \n    const reader = new FileReader();\n    \n    reader.onload = async (e) => {\n      try {\n        let multiPass;\n        \n        // Check if it's a GIF file\n        if (file.type === 'image/gif' || file.name.toLowerCase().endsWith('.gif')) {\n          // Extract MultiPass from GIF\n          multiPass = extractMultipassFromGif(e.target.result);\n          \n          // Create preview URL\n          const blob = new Blob([e.target.result], { type: 'image/gif' });\n          gifPreview = URL.createObjectURL(blob);\n        } else {\n          // Parse as JSON\n          multiPass = JSON.parse(e.target.result);\n          gifPreview = null;\n        }\n        \n        // Parse and validate\n        parsedMultiPass = parseMultipass(multiPass);\n        \n        if (!parsedMultiPass) {\n          throw new Error('Invalid MultiPass structure');\n        }\n      } catch (err) {\n        error = `Error reading file: ${err.message}`;\n        parsedMultiPass = null;\n        gifPreview = null;\n      }\n    };\n    \n    // Read file\n    if (file.type === 'image/gif' || file.name.toLowerCase().endsWith('.gif')) {\n      reader.readAsArrayBuffer(file);\n    } else {\n      reader.readAsText(file);\n    }\n  }\n  \n  // Extract from GIF (needs to be bundled with component)\n  function extractMultipassFromGif(arrayBuffer) {\n    const bytes = new Uint8Array(arrayBuffer);\n    \n    // Verify GIF signature\n    const signature = String.fromCharCode(...bytes.slice(0, 6));\n    if (!signature.startsWith('GIF')) {\n      throw new Error('Not a valid GIF file');\n    }\n    \n    // Skip GIF header (6) + Logical Screen Descriptor (7)\n    let pos = 13;\n    \n    // Skip Global Color Table if present\n    const packed = bytes[10];\n    if (packed & 0x80) {\n      const colorTableSize = 2 << (packed & 0x07);\n      pos += colorTableSize * 3;\n    }\n    \n    // Scan for comment extensions (0x21 0xFE)\n    while (pos < bytes.length - 1) {\n      if (bytes[pos] === 0x21 && bytes[pos + 1] === 0xFE) {\n        pos += 2;\n        let comment = '';\n        \n        // Read comment sub-blocks\n        while (pos < bytes.length && bytes[pos] !== 0x00) {\n          const blockSize = bytes[pos];\n          pos++;\n          \n          if (pos + blockSize > bytes.length) {\n            throw new Error('Malformed GIF: comment block extends beyond file');\n          }\n          \n          comment += String.fromCharCode(...bytes.slice(pos, pos + blockSize));\n          pos += blockSize;\n        }\n        \n        // Try to parse as JSON\n        try {\n          const parsed = JSON.parse(comment);\n          if (typeof parsed === 'object' && parsed !== null) {\n            return parsed;\n          }\n        } catch (e) {\n          // Not valid JSON, keep looking\n        }\n      }\n      pos++;\n    }\n    \n    throw new Error('No MultiPass JSON found in GIF');\n  }\n  \n  function reset() {\n    parsedMultiPass = null;\n    queryParams = null;\n    query = null;\n    error = null;\n    if (gifPreview) {\n      URL.revokeObjectURL(gifPreview);\n      gifPreview = null;\n    }\n  }\n  \n  // Helper functions\n  function getTitle(item) {\n    return item.title || item['@id'] || item.uri || item.term || 'Untitled';\n  }\n  \n  function getUrl(item) {\n    return item['@id'] || item.uri || '#';\n  }\n  \n  function formatDate(timestamp) {\n    if (!timestamp) return '';\n    const date = new Date(parseInt(timestamp));\n    return date.toLocaleDateString();\n  }\n</script>\n\n{#if !parsedMultiPass}\n  <!-- Upload/Drop zone -->\n  <div \n    class=\"upload-zone\"\n    class:dragging={isDragging}\n    on:dragover={handleDragOver}\n    on:dragleave={handleDragLeave}\n    on:drop={handleDrop}\n    role=\"button\"\n    tabindex=\"0\"\n  >\n    <div class=\"upload-content\">\n      <div class=\"upload-icon\">ðŸ“„</div>\n      <p class=\"upload-text\">{placeholder}</p>\n      <p class=\"upload-subtext\">JSON or GIF files accepted</p>\n      \n      <label class=\"upload-button\">\n        Browse Files\n        <input\n          type=\"file\"\n          accept=\".json,.gif,application/json,image/gif\"\n          on:change={handleFileInput}\n          style=\"display: none;\"\n        />\n      </label>\n      \n      {#if error}\n        <div class=\"upload-error\">\n          <p><strong>Error:</strong> {error}</p>\n        </div>\n      {/if}\n    </div>\n  </div>\n\n{:else}\n  <!-- Results display -->\n  <div class=\"results-container\">\n    \n    <!-- Header with metadata and reset button -->\n    <div class=\"results-header\">\n      <div class=\"header-content\">\n        {#if gifPreview}\n          <img src={gifPreview} alt=\"MultiPass GIF\" class=\"gif-preview\" />\n        {/if}\n        \n        <div class=\"header-text\">\n          {#if parsedMultiPass.meta?.title}\n            <h2 class=\"multipass-title\">{parsedMultiPass.meta.title}</h2>\n          {/if}\n          \n          {#if parsedMultiPass.meta?.description}\n            <p class=\"multipass-description\">{parsedMultiPass.meta.description}</p>\n          {/if}\n          \n          {#if parsedMultiPass.meta?.author}\n            <p class=\"multipass-author\">by {parsedMultiPass.meta.author}</p>\n          {/if}\n        </div>\n      </div>\n      \n      <button class=\"reset-button\" on:click={reset}>\n        Load Different MultiPass\n      </button>\n    </div>\n    \n    <!-- Loading state -->\n    {#if query && $query.loading}\n      <div class=\"loading\">\n        <div class=\"spinner\"></div>\n        <p>Loading results...</p>\n      </div>\n    {/if}\n    \n    <!-- Error state -->\n    {#if query && $query.error}\n      <div class=\"error\">\n        <p><strong>Error:</strong> {$query.error}</p>\n        <button on:click={load} class=\"retry-button\">Retry</button>\n      </div>\n    {/if}\n    \n    <!-- Results -->\n    {#if query && $query.results.length > 0 && !$query.loading}\n      \n      {#if render === 'list'}\n        <ul class=\"list\">\n          {#each $query.results as item}\n            <li>\n              <a href={getUrl(item)} target=\"_blank\" rel=\"noopener noreferrer\">\n                {getTitle(item)}\n              </a>\n              {#if item.description}\n                <p class=\"description\">{item.description}</p>\n              {/if}\n              {#if item.date}\n                <time class=\"date\">{formatDate(item.date)}</time>\n              {/if}\n              {#if item.octothorpes && item.octothorpes.length > 0}\n                <div class=\"tags\">\n                  {#each item.octothorpes as thorpe}\n                    {#if typeof thorpe === 'string'}\n                      <span class=\"tag\">#{thorpe}</span>\n                    {/if}\n                  {/each}\n                </div>\n              {/if}\n            </li>\n          {/each}\n        </ul>\n      \n      {:else if render === 'cards'}\n        <div class=\"cards\">\n          {#each $query.results as item}\n            <article class=\"card\">\n              {#if item.image}\n                <img src={item.image} alt={getTitle(item)} loading=\"lazy\" />\n              {/if}\n              <h3>\n                <a href={getUrl(item)} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {getTitle(item)}\n                </a>\n              </h3>\n              {#if item.description}\n                <p class=\"description\">{item.description}</p>\n              {/if}\n            </article>\n          {/each}\n        </div>\n      \n      {:else if render === 'compact'}\n        <div class=\"compact\">\n          {#each $query.results as item, i}\n            <a href={getUrl(item)} target=\"_blank\" rel=\"noopener noreferrer\">\n              {getTitle(item)}\n            </a>{#if i < $query.results.length - 1}, {/if}\n          {/each}\n        </div>\n      {/if}\n      \n      <!-- Footer -->\n      <div class=\"meta\">\n        <span class=\"result-count\">{$query.count} result{$query.count === 1 ? '' : 's'}</span>\n      </div>\n      \n    {/if}\n  </div>\n{/if}\n\n<style>\n  /* CSS Custom Properties */\n  :host {\n    --octo-font: system-ui, -apple-system, sans-serif;\n    --octo-primary: #3c7efb;\n    --octo-background: #ffffff;\n    --octo-text: #333333;\n    --octo-border: #e0e0e0;\n    --octo-error: #d32f2f;\n    --octo-spacing: 1rem;\n    --octo-radius: 4px;\n    \n    display: block;\n    font-family: var(--octo-font);\n    color: var(--octo-text);\n  }\n  \n  /* Upload zone */\n  .upload-zone {\n    min-height: 300px;\n    border: 3px dashed var(--octo-border);\n    border-radius: var(--octo-radius);\n    background: var(--octo-background);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: var(--octo-spacing);\n    transition: all 0.2s ease;\n    cursor: pointer;\n  }\n  \n  .upload-zone:hover {\n    border-color: var(--octo-primary);\n    background: #f8f9fa;\n  }\n  \n  .upload-zone.dragging {\n    border-color: var(--octo-primary);\n    border-style: solid;\n    background: #e3f2fd;\n    transform: scale(1.02);\n  }\n  \n  .upload-content {\n    text-align: center;\n    max-width: 400px;\n  }\n  \n  .upload-icon {\n    font-size: 4rem;\n    margin-bottom: var(--octo-spacing);\n  }\n  \n  .upload-text {\n    font-size: 1.125rem;\n    font-weight: bold;\n    margin: 0 0 0.5rem 0;\n    color: var(--octo-text);\n  }\n  \n  .upload-subtext {\n    font-size: 0.875rem;\n    color: #666;\n    margin: 0 0 var(--octo-spacing) 0;\n  }\n  \n  .upload-button {\n    display: inline-block;\n    padding: 0.75rem 1.5rem;\n    background: var(--octo-primary);\n    color: white;\n    border-radius: var(--octo-radius);\n    cursor: pointer;\n    font-weight: bold;\n    transition: opacity 0.2s;\n  }\n  \n  .upload-button:hover {\n    opacity: 0.9;\n  }\n  \n  .upload-error {\n    margin-top: var(--octo-spacing);\n    padding: var(--octo-spacing);\n    background: #ffebee;\n    border: 1px solid var(--octo-error);\n    border-radius: var(--octo-radius);\n  }\n  \n  .upload-error p {\n    margin: 0;\n    color: var(--octo-error);\n  }\n  \n  /* Results container */\n  .results-container {\n    background: var(--octo-background);\n  }\n  \n  /* Results header */\n  .results-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: var(--octo-spacing);\n    padding-bottom: var(--octo-spacing);\n    border-bottom: 2px solid var(--octo-border);\n    margin-bottom: var(--octo-spacing);\n  }\n  \n  .header-content {\n    display: flex;\n    gap: var(--octo-spacing);\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .gif-preview {\n    width: 100px;\n    height: 100px;\n    object-fit: cover;\n    border: 1px solid var(--octo-border);\n    border-radius: var(--octo-radius);\n    flex-shrink: 0;\n  }\n  \n  .header-text {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .multipass-title {\n    margin: 0 0 0.5rem 0;\n    font-size: 1.5rem;\n    font-weight: bold;\n  }\n  \n  .multipass-description {\n    margin: 0 0 0.5rem 0;\n    color: #666;\n    line-height: 1.5;\n  }\n  \n  .multipass-author {\n    margin: 0;\n    font-size: 0.875rem;\n    font-style: italic;\n    color: #999;\n  }\n  \n  .reset-button {\n    padding: 0.5rem 1rem;\n    background: var(--octo-background);\n    border: 1px solid var(--octo-border);\n    border-radius: var(--octo-radius);\n    cursor: pointer;\n    font-size: 0.875rem;\n    white-space: nowrap;\n  }\n  \n  .reset-button:hover {\n    background: #f8f9fa;\n  }\n  \n  /* Loading state */\n  .loading {\n    text-align: center;\n    padding: calc(var(--octo-spacing) * 2);\n  }\n  \n  .spinner {\n    width: 40px;\n    height: 40px;\n    margin: 0 auto var(--octo-spacing);\n    border: 4px solid var(--octo-border);\n    border-top-color: var(--octo-primary);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n  \n  .loading p {\n    margin: 0;\n    color: #666;\n  }\n  \n  /* Error state */\n  .error {\n    padding: var(--octo-spacing);\n    background: #ffebee;\n    border: 1px solid var(--octo-error);\n    border-radius: var(--octo-radius);\n    text-align: center;\n    margin-bottom: var(--octo-spacing);\n  }\n  \n  .error p {\n    color: var(--octo-error);\n    margin: 0 0 var(--octo-spacing) 0;\n  }\n  \n  .retry-button {\n    padding: 0.5rem 1rem;\n    background: var(--octo-error);\n    color: white;\n    border: none;\n    border-radius: var(--octo-radius);\n    cursor: pointer;\n  }\n  \n  /* List mode */\n  .list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n  \n  .list li {\n    padding: var(--octo-spacing);\n    border-bottom: 1px solid var(--octo-border);\n  }\n  \n  .list li:last-child {\n    border-bottom: none;\n  }\n  \n  /* Card grid mode */\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    gap: var(--octo-spacing);\n  }\n  \n  .card {\n    padding: var(--octo-spacing);\n    border: 1px solid var(--octo-border);\n    border-radius: var(--octo-radius);\n  }\n  \n  .card img {\n    width: 100%;\n    height: auto;\n    border-radius: var(--octo-radius);\n    margin-bottom: 0.5rem;\n  }\n  \n  .card h3 {\n    margin: 0 0 0.5rem 0;\n    font-size: 1.125rem;\n  }\n  \n  /* Compact mode */\n  .compact {\n    line-height: 1.5;\n    padding: var(--octo-spacing);\n  }\n  \n  /* Common elements */\n  a {\n    color: var(--octo-primary);\n    text-decoration: none;\n  }\n  \n  a:hover {\n    text-decoration: underline;\n  }\n  \n  .description {\n    margin: 0.5rem 0 0 0;\n    color: #666;\n    font-size: 0.875rem;\n    line-height: 1.4;\n  }\n  \n  .date {\n    display: block;\n    margin-top: 0.25rem;\n    font-size: 0.75rem;\n    color: #999;\n  }\n  \n  .tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.25rem;\n    margin-top: 0.5rem;\n  }\n  \n  .tag {\n    display: inline-block;\n    padding: 0.125rem 0.375rem;\n    background: #f0f0f0;\n    border-radius: var(--octo-radius);\n    font-size: 0.75rem;\n  }\n  \n  /* Meta footer */\n  .meta {\n    margin-top: var(--octo-spacing);\n    padding-top: var(--octo-spacing);\n    border-top: 1px solid var(--octo-border);\n    text-align: right;\n    font-size: 0.875rem;\n    color: #666;\n  }\n  \n  .result-count {\n    font-weight: bold;\n  }\n</style>\n"],"names":["ctx","_a","_b","_c"],"mappings":"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"}